<!-- pages/tenders/cost-management.html -->
<div class="cost-management-page">
    <div class="page-header">
        <h1 class="page-title">💰 成本控管分析</h1>
        <p class="page-subtitle">分析標單的原始合約、追加項目與總金額的變化。</p>
    </div>

    <!-- 篩選區域 -->
    <div class="content-card filter-section">
        <div class="filter-row">
            <div class="form-group">
                <label for="projectSelect">📁 選擇專案</label>
                <select id="projectSelect" class="form-control"></select>
            </div>
            <div class="form-group">
                <label for="tenderSelect">📋 選擇標單</label>
                <select id="tenderSelect" class="form-control" disabled></select>
            </div>
        </div>
    </div>

    <!-- 載入中動畫 -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>載入成本分析資料中...</p>
    </div>

    <!-- 主要報表內容區 -->
    <div id="mainContent" style="display: none;">
        <!-- 主要統計卡片 -->
        <div class="stats-grid-4">
            <div class="stat-card-lg original">
                <div class="stat-label">原始合約金額</div>
                <div class="stat-value" id="originalAmount">NT$ 0</div>
            </div>
            <div class="stat-card-lg addition">
                <div class="stat-label">追加項目總金額</div>
                <div class="stat-value" id="additionAmount">NT$ 0</div>
            </div>
            <div class="stat-card-lg total">
                <div class="stat-label">目前總金額</div>
                <div class="stat-value" id="totalAmount">NT$ 0</div>
            </div>
            <div class="stat-card-lg percentage">
                <div class="stat-label">增幅比例</div>
                <div class="stat-value increase" id="increasePercentage">0%</div>
            </div>
        </div>

        <!-- 次要統計卡片 -->
        <div class="content-card secondary-stats">
            <div>
                <div class="stat-label">大項目總數</div>
                <div class="stat-value" id="majorItemsCount">0</div>
            </div>
            <div>
                <div class="stat-label">細項總數</div>
                <div class="stat-value" id="detailItemsCount">0</div>
            </div>
            <div>
                <div class="stat-label">追加項目數</div>
                <div class="stat-value" id="additionItemsCount">0</div>
            </div>
        </div>

        <!-- 追加項目明細表 -->
        <div class="content-card">
            <h3 class="content-subtitle">追加/追減項目明細</h3>
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th style="width: 10%;">項次</th>
                            <th>項目名稱</th>
                            <th class="text-right" style="width: 10%;">數量</th>
                            <th class="text-right" style="width: 15%;">單價</th>
                            <th class="text-right" style="width: 15%;">總價</th>
                            <th style="width: 25%;">原因</th>
                        </tr>
                    </thead>
                    <tbody id="additionItemsTableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <!-- 預設提示訊息 -->
    <div class="empty-state" id="emptyState" style="display: flex;">
        <div class="empty-state-icon">📊</div>
        <h3>請選擇專案與標單</h3>
        <p>請從上方選擇「專案」與「標單」以載入成本分析報告。</p>
    </div>
</div>
